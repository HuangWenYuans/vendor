<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>安装人员界面</title>
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="/vendor/vendor_main/static/layui/css/layui.css" th:href="@{/layui/css/layui.css}"
          media="all">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>
<body>
<ul class="layui-nav">
    <li class="layui-nav-item"><a>欢迎编号为<span th:text="${session.installs.get(0).getInstallerId()}"></span>的安装人员</a></li>
    <li class="layui-nav-item"><a href="/installer/index">安装任务</a></li>
    <li class="layui-nav-item"><a href="/installer/log">安装历史</a></li>
    <li class="layui-nav-item" style="float: right"><a href="">返回主界面</a></li>
</ul>
<!----------------------------安装任务---------------------------->
<div th:if="${session.flag} eq 1">
    <table class="layui-table">
        <colgroup>
            <col width="200">
            <col width="200">
            <col width="200">
            <col width="200">
            <col width="200">
        </colgroup>
        <thead>
        <tr>
            <th>售货机ID</th>
            <th>用户名</th>
            <th>联系方式</th>
            <th>默认地址</th>
            <th>预期安装时间</th>
            <th>操作</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="install:${session.installs}" th:if="${session.installs}!= null">
            <td th:text="${install.getSymbol().getSymbolId()}"></td>
            <td th:text="${install.getUser().getConsignees().get(0).getConsigneeName()}">
            </td>
            <td th:text="${install.getUser().getConsignees().get(0).getConsigneePhone()}">
            </td>
            <td th:text="${install.getUser().getConsignees().get(0).getConsigneeAddress()}"></td>
            <td th:text="${install.installTime}"></td>
            <td>
                <a th:href="@{'/installer/install?installid='+${install.installId} + '&symbolid='+${install.getSymbol().getSymbolId()}}">
                    <button class="layui-btn">安装</button>
                </a></td>
        </tr>
        </tbody>
    </table>
</div>
<!----------------------------安装历史---------------------------->
<div th:if="${session.flag eq 0 and session.installs.get(0) != null}">
    <table class="layui-table">
        <colgroup>
            <col width="200">
            <col width="200">
            <col width="200">
            <col width="200">
        </colgroup>
        <thead>
        <tr>
            <th>售货机ID</th>
            <th>用户名</th>
            <th>联系方式</th>
            <th>默认地址</th>
            <th>安装时间</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="install:${session.installs}" th:if="${session.installs}!= null">
            <td th:text="${install.getSymbol().getSymbolId()}"></td>
            <td th:text="${install.getUser().getConsignees().get(0).getConsigneeName()}"></td>
            <td th:text="${install.getUser().getConsignees().get(0).getConsigneePhone()}"></td>
            <td th:text="${install.getUser().getConsignees().get(0).getConsigneeAddress()}"></td>
            <td th:text="${install.installTime}"></td>
        </tr>
        </tbody>
    </table>
</div>
<div id="demo1" style="text-align: center"></div>
<script src="/vendor/vendor_main/static/layui/layui.js" th:src="@{/layui/layui.js}"></script>
<script>
    layui.use(['laypage', 'layer'], function () {
        var laypage = layui.laypage
            , layer = layui.layer;

        //总页数大于页码总数
        laypage.render({
            elem: 'demo1'
            , count: 70 //数据总数
            , jump: function (obj) {
                console.log(obj)
            }
        });
    });

</script>

</body>
</html>